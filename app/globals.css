@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Deep black + purple */
  --bg: 258 30% 5%;           /* near-black with violet hue */
  --fg: 220 40% 96%;          /* near-white */
  --muted: 220 12% 70%;
  --accent-green: 268 90% 66%; /* primary violet (repurposed var) */
  --accent-blue: 260 100% 75%; /* softer purple-blue for accents */
  --accent-purple: 285 92% 72%;
  --card: 258 25% 10%;
  --border: 0 0% 100% / 0.08;
  /* Use Next local font var so basePath works on Pages */
  --ff-exotica: var(--font-sprite), system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --ff-ouroboros: var(--font-sprite), system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
}

.dark {
  /* Same palette for dark */
  --bg: 258 30% 5%;
  --fg: 220 40% 96%;
  --muted: 220 12% 70%;
  --accent-green: 268 90% 66%;
  --accent-blue: 260 100% 75%;
  --accent-purple: 285 92% 72%;
  --card: 258 25% 10%;
  --border: 0 0% 100% / 0.08;
  /* Display font variable for headings */
  --ff-exotica: 'SPRITE GRAFFITI', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
}

html:focus-within { scroll-behavior: smooth; }

body { @apply bg-[hsl(var(--bg))] text-[hsl(var(--fg))] antialiased; font-family: var(--ff-exotica); }

/* Disable horizontal scroll */
html, body { overflow-x: hidden; }

/* Ensure only one vertical scrollbar (document) */
html, body { height: 100%; }
html { overflow-y: auto; }
body { overflow-y: visible; }

/* Accessible focus ring */
:where(a, button, input, select, textarea) {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[hsl(var(--bg))] focus:ring-[hsl(var(--accent-green))];
}

/* 8pt baseline rhythm helpers */
.container { @apply mx-auto px-4 sm:px-6; }

/* Subtle section background aurora */
.section-bg {
  background-image:
    radial-gradient(70rem 40rem at 110% -10%, rgba(147,51,234,0.25), transparent),
    radial-gradient(80rem 40rem at -10% 120%, rgba(99,102,241,0.18), transparent);
}

.aurora-bg { pointer-events: none; }

.subtle-lead { @apply leading-relaxed text-[hsl(var(--muted))]; }

/* Skip link */
.skip-link {
  position: absolute;
  left: 0;
  top: -40px;
  background: hsl(var(--accent-green));
  color: #000;
  padding: 8px 12px;
  z-index: 100;
}
.skip-link:focus { top: 0; }

/* Neon card edge like gradient glow */
.neon-card { position: relative; }
.neon-card::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: 1rem;
  background: linear-gradient(135deg, rgba(168,85,247,.55), rgba(56,189,248,.35));
  filter: blur(16px);
  opacity: .25;
  z-index: -1;
}

/* Brand icons: grayscale → brand color on hover */
.brand-icon { filter: grayscale(1) contrast(.8) brightness(.9); transition: filter .2s ease, transform .2s ease, background-color .2s ease; }
.brand-icon:hover { filter: none; transform: translateY(-2px); background-color: var(--brand-color); }

/* Simple path draw animation for statistic card */
@keyframes dash {
  from { stroke-dashoffset: 380; }
  to { stroke-dashoffset: 0; }
}
.chart-path { stroke-dasharray: 380; stroke-dashoffset: 380; animation: dash 2.2s ease-in-out forwards; opacity: .9; }

/* Smooth fade-up on scroll */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

.reveal { opacity: 0; transform: translateY(12px); }
.reveal.is-visible { animation: fadeUp .6s cubic-bezier(0.22,1,0.36,1) forwards; }

.reveal-grid > * { opacity: 0; transform: translateY(12px); }
.reveal-grid.is-visible > * { animation: fadeUp .6s cubic-bezier(0.22,1,0.36,1) forwards; }
/* Stagger up to 12 children */
.reveal-grid.is-visible > *:nth-child(1) { animation-delay: 0s; }
.reveal-grid.is-visible > *:nth-child(2) { animation-delay: .04s; }
.reveal-grid.is-visible > *:nth-child(3) { animation-delay: .08s; }
.reveal-grid.is-visible > *:nth-child(4) { animation-delay: .12s; }
.reveal-grid.is-visible > *:nth-child(5) { animation-delay: .16s; }
.reveal-grid.is-visible > *:nth-child(6) { animation-delay: .20s; }
.reveal-grid.is-visible > *:nth-child(7) { animation-delay: .24s; }
.reveal-grid.is-visible > *:nth-child(8) { animation-delay: .28s; }
.reveal-grid.is-visible > *:nth-child(9) { animation-delay: .32s; }
.reveal-grid.is-visible > *:nth-child(10) { animation-delay: .36s; }
.reveal-grid.is-visible > *:nth-child(11) { animation-delay: .40s; }
.reveal-grid.is-visible > *:nth-child(12) { animation-delay: .44s; }

/* Readable system font override for specific text blocks */
.font-readable { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; }

/* Line clamp helpers (no plugin) */
.clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

/* Replace headings text visually without touching markup */
#stack h2 { color: transparent !important; position: relative; text-align: center; text-wrap: balance; }
#stack h2::before { content: "стэк"; color: hsl(var(--fg)); display: inline-block; }

#projects h2 { color: transparent !important; position: relative; text-align: center; }
#projects h2::before { content: "проекты"; color: hsl(var(--fg)); display: inline-block; }

#projects-page h1 { color: transparent !important; position: relative; text-align: center; }
#projects-page h1::before { content: "проекты"; color: hsl(var(--fg)); display: inline-block; }


/* Local fonts are loaded via next/font/local in layout; no manual @font-face needed */

/* Heading label fixes: absolute centered pseudo text */
#stack h2::before { content: "стэк" !important; position: absolute; left: 50%; transform: translateX(-50%); }
#projects h2::before { content: "проекты" !important; position: absolute; left: 50%; transform: translateX(-50%); }
#projects-page h1::before { content: "проекты" !important; position: absolute; left: 50%; transform: translateX(-50%); }
